import os
if 'COVERAGE_PROCESS_START' in os.environ:
    try:
        import coverage
    except (ImportError, ModuleNotFoundError) as exc:
        # Some tests need to override PATH: we need to set `COVERAGE_PACKAGE_PATH` with the path to coverage's __init__ file 
        if not os.environ.get('COVERAGE_PACKAGE_PATH'):
            raise RuntimeError('COVERAGE_PROCESS_START is defined, but not COVERAGE_PACKAGE_PATH')
        from importlib.machinery import SourceFileLoader
        coverage = SourceFileLoader("coverage", os.path.join(os.environ['COVERAGE_PACKAGE_PATH'], '__init__.py')).load_module()
        
    coverage.process_startup()
